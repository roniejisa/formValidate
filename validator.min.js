"use strict";var FORM_VALIDATION=((e={})=>{let t="red",n="#010101",r="#ffbaba",o="#2c2c2c",i="image*",a=t,s=t,l=t,c=n,u="",d=0,f=null;e.rules=[g('form[check] input[type="radio"]'),g('form[check] input[type="checkbox"]')];var p={required:function(e){if("file"==e.type&&""==e.getAttribute("input-file")){return h(e,"form").querySelector("[data-gallery]").querySelectorAll("li").length>0?void 0:e.getAttribute("m-required")||"Vui lòng nhập trường này"}if(e.hasAttribute("gallery")){return""!==h(e,"form").querySelector("div[class^='preview_img']").querySelector("img").src.trim?void 0:e.getAttribute("m-required")||"Vui lòng nhập trường này"}return e.value.trim()?void 0:e.getAttribute("m-required")||"Vui lòng nhập trường này"},number:function(e){return/^[0-9]+$/.test(e.value)?void 0:e.getAttribute("m-number")||"Vui lòng nhập đúng định dạng số"},email:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?void 0:e.getAttribute("m-email")||"Vui lòng nhập đúng định dạng email"},min:function(e){return function(t){return t.value.length>=e?void 0:t.getAttribute("m-min")||`Vui lòng nhập ít nhất ${e} kí tự`}},max:function(e){return function(t){return t.value.length<=e?void 0:t.getAttribute("m-max")||`Vui lòng nhập tối đa ${min} kí tự`}},same:function(e,t){return function(n){var r=t.querySelector(`[name="${e}"]`).value;return n.value===r?void 0:n.getAttribute("m-same")||"Mật khẩu không giống nhau"}},different:function(e,t){return function(n){var r=t.querySelector(`[name="${e}"]`).value;return n.value!==r?void 0:n.getAttribute("m-different")||"Mật khẩu không được giống nhau"}},phoneOrEmail:function(e){var t=/^[0-9]+$/,n=e.value.trim();if(t.test(n))var r=t.test(n)&&n.length>=10;else r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n);return r?void 0:e.getAttribute("m-phoneOr")||"Không đúng định dạng email hoặc số điện thoại"},string:function(e){return/^[a-zA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂẾưăạảấầẩẫậắằẳẵặẹẻẽềềểếỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s\W|_]+$/.test(e.value.trim())?void 0:e.getAttribute("m-phoneOr")||"Không đúng định dạng chữ viết"},regex:function(e){return function(t){return RegExp(e).test(t.value)?void 0:t.getAttribute("m-regex")||"Không đúng định dạng quy định"}}};function m(e){r=e.colorAbsolute||r,a=e.color||t,s=e.colorBorder||t,l=e.colorComment||t,c=e.colorBackground||n,u=e.borderRadius||"",d=e.timeLoad||0,i=e.typeFile||i,function(){var e=document.createElement("style");e.type="text/css";var t=document.createTextNode(`@-webkit-keyframes openErrorMessage {from { opacity:0; transform: translateY(15px) } to{opacity:1; transform: translateY(5px)} }\n            .r-error-message[type="absolute"]::before{\n                content: '';\n                border-width: 8px 12px;\n                position: absolute;\n                border-color: transparent transparent ${c} transparent;\n                border-style: solid;\n                left: 25%;\n                bottom: 100%;\n                transform: translateX(-50%);\n            }`);e.appendChild(t),document.getElementsByTagName("head")[0].appendChild(e)}()}function g(e){return{selector:e,check:function(e,t){let n=t.parentElement.getAttribute("m-checked")?t.parentElement.getAttribute("m-checked"):"Vui lòng nhập trường này";return e?void 0:n}}}function h(e,t){for(;e.parentElement;){if(e.parentElement.matches(t))return e.parentElement;e=e.parentElement}}function b(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function y(e){return new Promise(t=>{setTimeout(t,e)})}function v(){const t=document.querySelectorAll(".formValidation");Array.from(t).forEach(t=>{var n,g={},v=[],x=null,w=[],A=[],k=!!t.hasAttribute("files"),E=!!t.hasAttribute("absolute");E&&m({color:r,colorBackground:o,colorBorder:r});var S=!!t.hasAttribute("clear"),q=t.hasAttribute("plus")?t.getAttribute("plus"):null;let O;function j(e,t){var n,r=w[e.selector],o=x.querySelector(e.selector);for(var i in r){switch(o.type){case"radio":case"checkbox":n=r[i](x.querySelector(e.selector+":checked"),o);break;default:n=r[i](o.value)}if(n)break}return n?M(n,o,t):$({target:o}),!n}function L(e){e.className="r-error-message",Object.assign(e.style,{pointerEvents:"none",color:a,display:"block",fontSize:"14px",lineHeight:"16px",padding:"4px 0",textAlign:"left",textShadow:"1px 1px #00000030",zIndex:10,animation:"0.3s openErrorMessage ease-in-out forwards"})}function C(e,t,n,r=!0){var o,i=document.createElement("span");if(L(i),E&&T(n,i),t){if(r)switch(A.push(n),n.type){case"text":case"password":case"select":A[0].focus()}switch(i.innerHTML=t,n.type){case"checkbox":case"radio":"r-error-message"!==n.parentElement.nextSibling.className&&b(n.parentElement,i);break;default:e.querySelector(".r-error-message")||(o=i,e.appendChild(o),n.style.border="1.68px solid "+s)}}}function T(e,t){t.setAttribute("type","absolute"),Object.assign(t.style,{position:"absolute",padding:"4px 32px 6px 18px",borderRadius:u,background:c,maxWidth:"80%",wordBreak:"break-word",top:(0!==e.offsetTop?e.offsetTop:e.parentElement.offsetTop)+(0!==e.clientHeight?e.clientHeight:e.parentElement.clientHeight)+"px",left:(0!==e.offsetLeft?e.offsetLeft:e.parentElement.offsetLeft)+"px"})}function M(e,t,n=!0){var r=document.createElement("span");if(L(r),E&&T(t,r),e){if(n)switch(A.push(t),t.type){case"text":case"password":case"select":A[0].focus()}switch(r.innerHTML=e,t.type){case"checkbox":case"radio":"r-error-message"!==t.parentElement.nextSibling.className&&b(t.parentElement,r);break;default:"r-error-message"!==t.nextSibling.className&&(b(t,r),t.style.border="1.68px solid "+s)}}}function $(e){var t=!1;switch(x.hasAttribute("parent")&&(t=h(e.target,x.getAttribute("parent"))),e.target.type){case"checkbox":case"radio":"r-error-message"===e.target.parentElement.nextSibling.className&&H(e.target.parentElement.nextSibling);break;case"select-one":if(""==e.target.value){R(e);break}default:if("r-error-message"===e.target.nextSibling.className)e.target.style.removeProperty("border"),H(e.target.nextSibling);else if(t&&t.querySelector(".r-error-message")){H((t=h(e.target,x.getAttribute("parent"))).querySelector(".r-error-message")),e.target.style.removeProperty("border")}}}function H(e){e.animate([{opacity:0,transform:"translateY(10px)"}],{duration:300,fill:"forwards"}).onfinish=function(){e.remove()}}function R(e){var t,n=e.target,r=g[n.name];for(var o of r)if(t=o(n))break;var i=!1;return x.hasAttribute("parent")&&(i=h(n,x.getAttribute("parent"))),i?C(i,t,n,!1):M(t,n,!1),!t}function z(e){var t,n=e.target,r=g[n.name];for(var o of r)if(t=o(n))break;var i=!1;return x.hasAttribute("parent")&&(i=h(n,x.getAttribute("parent"))),i?C(i,t,n,!0):M(t,n,!0),!t}function N(e,n){var r;Array.from(n).forEach(function(e){e.type.match(i)&&v.push(e)}),v.length>0&&(r=e,Object.assign(r.style,{border:"2px dashed "+l,margin:"12px 0",cursor:"pointer",borderRadius:u,transition:"all 0.3s ease-in-out"}),r.ondragover=function(){return this.style.borderColor="blue",this.style.opacity=.5,!1},r.ondragleave=function(){return this.style.borderColor=s,this.style.opacity=1,!1},r.ondragend=function(e){return e.preventDefault(),!1},r.ondrop=function(e){e.preventDefault(),this.style.borderColor="green",this.style.opacity=1,N(r,e.dataTransfer.files)},r.onclick=function(){t.querySelector("[input-file]").click()},r.innerHTML="",function(e){const t=function(){var e=document.createElement("ul");return function(e){var t=document.createElement("style");t.appendChild(document.createTextNode("div ::-webkit-scrollbar {display:none;-webkit-appearance: none}")),Object.assign(e.style,{display:"grid",listStyle:"none",gridAutoFlow:"column",padding:"16px",overflow:"auto",gridGap:"16px",gridAutoColumns:"120px"}),e.append(t),function(e){let t,n,r,o=!1;function i(e){e?r.hasAttribute("href")&&!r.hasAttribute("data-href")&&(r.setAttribute("data-href",r.getAttribute("href")),r.href="javascript:void(0)"):setTimeout(()=>{r instanceof Element&&r.hasAttribute("data-href")&&(r.setAttribute("href",r.getAttribute("data-href")),r.removeAttribute("data-href"))},100)}e.addEventListener("mousedown",i=>{i.preventDefault(),r=i.target,o=!0,e.style.cursor="grap",t=i.pageX-e.offsetLeft,n=e.scrollLeft}),e.addEventListener("mouseleave",e=>{e.preventDefault(),i(o=!1)}),e.addEventListener("mouseup",e=>{e.preventDefault(),i(o=!1)}),e.addEventListener("mousemove",r=>{if(!o)return;i(o),r.preventDefault();const a=r.pageX-e.offsetLeft,s=1*(a-t);e.scrollLeft=n-s})}(e)}(e),e}();v.forEach((n,r)=>{var o=document.createElement("li"),i=document.createElement("div"),a=document.createElement("div"),s=document.createElement("img");s.src=window.URL.createObjectURL(n);var c=document.createElement("button");!function(e){e.innerHTML="x",e.type="button",Object.assign(e.style,{position:"absolute",right:"8px",top:"8px",cursor:"pointer",background:l,border:"1.68px solid "+l,boxShadow:"0.2px 0.2px 6px 0.2px "+l,color:"white",height:"20px",width:"20px",fontWeight:"bold",fontSize:"8px",opacity:"0",borderRadius:u,transition:"all 0.3s",padding:0}),e.onmouseover=function(){Object.assign(e.style,{border:"1.68px solid "+l,boxShadow:"0.2px 0.2px 6px 0.2px "+l,transform:"scale(1.05)"})},e.onmouseleave=function(){Object.assign(e.style,{border:"1.68px solid "+l,boxShadow:"0.2px 0.2px 6px 0.2px "+l})}}(c),function(e){Object.assign(e.style,{position:"relative",display:"block",borderRadius:u,paddingBottom:"100%",boxShadow:"0 0 3px #00000030"})}(i),function(e,t,n,r,o){(function(e){Object.assign(e.style,{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",filter:"blur(1px)",transition:"all 0.3s",borderRadius:u})})(r),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",flexDirection:"column",transition:"all 0.3s"});var i=o.name,a=Math.ceil(o.size/1024),s=document.createElement("p"),l=document.createElement("p");s.innerText=i,l.innerText=a>1e3?Number(a/1e3).toFixed(1)+" MB":a+" KB";(function(e){e.title=e.innerText,Object.assign(e.style,{width:"75%",borderRadius:u,marginTop:"24px",padding:"4px 10px",background:"#ffffff9e",color:"#0e0e0e",opacity:0,marginBottom:"8px",fontSize:"12px",display:"block",overflow:"hidden",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",transition:"all 0.3s"})})(s),function(e){Object.assign(e.style,{width:"75%",borderRadius:u,padding:"4px 10px",fontSize:"12px",background:"#ffffff9e",textAlign:"center",color:"#0e0e0e",opacity:0,display:"-webkit-box",webkitLineClamp:1,webkitBoxOrient:"vertical",transition:"all 0.3s"})}(l);var c=document.createElement("div"),d=document.createElement("div");c.className="img-progress",Object.assign(c.style,{width:"100px",height:"16px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:u,overflow:"hidden"}),Object.assign(d.style,{background:"white",height:"100%",width:0}),c.appendChild(d),e.appendChild(c),d.animate([{width:0},{width:"100%"}],{duration:a,fill:"forwards"}).onfinish=function(){const o=d.animate([{opacity:0}],{duration:300,fill:"forwards"});o.onfinish=function(){c.remove(),function(e,t,n,r,o){o.style.filter="blur(0px)",e.style.cursor="zoom-in",e.onmouseover=(()=>{t.style.opacity=1,n.style.opacity=1,r.style.opacity=1,o.style.filter="blur(2px)"}),e.onmouseleave=(()=>{t.style.opacity=0,n.style.opacity=0,r.style.opacity=0,o.style.filter="blur(0px)"}),n.onmouseover=function(){Object.assign(n.style,{background:"white"})},n.onmouseleave=function(){Object.assign(n.style,{background:"#ffffff9e"})},r.onmouseover=function(){Object.assign(r.style,{background:"white"})},r.onmouseleave=function(){Object.assign(r.style,{background:"#ffffff9e"})}}(n,t,s,l,r),e.appendChild(t),e.appendChild(s),e.appendChild(l)}}}(a,c,o,s,n),function(e){Object.assign(e.style,{position:"relative",display:"inline-block",verticalAlign:"top"})}(o),i.appendChild(s),o.appendChild(i),o.appendChild(a),t.appendChild(o),c.onclick=function(n){n.stopPropagation(),1==v.length&&(t.remove("style"),e.removeAttribute("style"),v=[]),v.splice(r,1),o.remove()}}),function(e,t){e.appendChild(t);const n=t.querySelectorAll("li");n.forEach(function(e,t){e.onclick=function(r){r.stopPropagation(),f=t,function(e,t){const n=e.querySelector("img");var r=document.createElement("div"),o=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button"),l=document.createElement("button");B(a,"left",t,o),B(l,"right",t,o),r.className="img-preview",o.className="img-preview__bg",function(e,t,n,r){e.innerHTML="x",Object.assign(e.style,{position:"absolute",color:"white",background:"#01010150",zIndex:1,padding:"6px 10px",fontSize:"24px",fontWeight:"bold",cursor:"pointer",top:"15px",right:"15px",border:"none",borderRadius:u}),e.onmousemove=function(){e.animate([{backgroundColor:s,boxShadow:"0.2px 0.2px 6px 0.2px "+s}],{duration:400,fill:"forwards"})},e.onmouseleave=function(){e.animate([{boxShadow:"none",color:"white",background:"#01010150"}],{duration:400,fill:"forwards"})},e.onclick=function(){const e=n.animate([{transform:"scale(1)",opacity:1},{transform:"scale(0)",opacity:0}],{duration:300,fill:"forwards"});e.onfinish=function(){const e=t.animate([{transform:"scale(1)"},{transform:"scale(0)",opacity:0}],{duration:300});e.onfinish=function(){t.remove(),r.style.pointerEvents="all"}}}}(i,r,o,e),function(e,t){Object.assign(e.style,{width:"50%",paddingBottom:"28%",borderRadius:u,height:"0",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",transition:"box-shadow 0.1s, transform 0.1s",margin:"0 auto",border:"6px solid white",backgroundOrigin:"border-box",transition:"transform 0.1s ease-out,box-shadow 0.2s",backgroundImage:`url(${t}), linear-gradient(0deg,white,white)`,cursor:"grab"}),X(e),e.src=t,e.addClass,e.onclick=function(e){e.stopPropagation()}}(o,n.src),function(e,t){Object.assign(e.style,{position:"fixed",background:"#01010199",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",top:0,left:0,zIndex:1060}),e.animate([{transform:"scale(0)",opacity:0},{transform:"scale(1)",opacity:1}],{duration:300,iterations:1}),e.onclick=function(){t.style.pointerEvents="all";e.animate([{transform:"scale(1)"},{transform:"scale(0)",opacity:0}],{duration:300,iterations:1}),setTimeout(()=>{e.remove()},200)}}(r,e),r.appendChild(o),r.appendChild(i),r.appendChild(a),r.appendChild(l),document.querySelector("body").appendChild(r)}(e,n)}})}(e,t)}(e))}function B(e,t,n,r){Object.assign(e.style,{position:"absolute",top:"50%",transform:"translateY(-50%)",background:a,padding:"15px 8px",border:"none",color:c,transition:"all 300ms ease-out",cursor:"pointer"}),e.onmousemove=function(){e.style.boxShadow="0 0 3px "+a},e.onmouseleave=function(){e.style.boxShadow="inherit"},"right"==t?(e.innerHTML='<svg style="display: block;height: 24px; width: 24px; viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg>',e.style.right="16px"):(e.style.left="16px",e.innerHTML='<svg style="transform:scaleX(-1); display: block;height: 24px; width: 24px; viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg>'),e.onclick=function(e){if(e.stopPropagation(),f="right"==t?++f>n.length-1?0:f:--f<0?n.length-1:f,"right"==t)var o="translateX(100%)",i="translateX(-100%) scale(0)";else o="translateX(-100%)",i="translateX(100%) scale(0)";r.animate([{transform:o}],{duration:200,fill:"forwards"}).onfinish=function(){r.style.backgroundImage=`url(${n[f].querySelector("img").src}), linear-gradient(0deg,white,white)`;const e=r.animate([{transform:i},{transform:"translateX(0%)"}],{duration:300,fill:"forwards"});e.onfinish=function(){y(0).then(function(){return e.cancel(),y(300)}).then(function(){X(r)})}}}}function X(e){e.onmousemove=(t=>{const n=e.clientHeight,r=e.clientWidth,o=t.layerX,i="perspective(500px) scale(1.1) rotateX("+(t.layerY-n/2)/n*8+"deg) rotateY("+(o-r/2)/r*-8+"deg)";e.style.transform=i}),e.onmouseleave=function(){e.style.transform="scale(1)"}}function D(e,r){var o=r.dataset.success;if(!o)return r.submit();var i=r.getAttribute("method"),a=r.getAttribute("action"),s=r.querySelector('button[type="submit"]'),l=new XMLHttpRequest;l.open(i,a,!0),l.onreadystatechange=function(){if(s.removeAttribute("style"),s.hasAttribute("style-old")&&s.setAttribute("style",s.getAttribute("style-old")),s.innerHTML=s.getAttribute("content-old"),s.disabled=!1,l.readyState===XMLHttpRequest.DONE){var n=l.status;if(0===n||n>=200&&n<400){const n=JSON.parse(l.responseText);if(S&&"code"in n&&200==n.code){const e=t.querySelectorAll("[data-gallery]");e.length>0&&e[0].querySelectorAll("ul").length>0&&(v=[],e[0].querySelector("ul").innerHTML="",e[0].removeAttribute("style")),function(e){e.querySelectorAll("[name]").forEach(function(e){switch(e.type){case"checkbox":case"radio":e.checked=!1;break;case"selected":e.seleced=!1;break;case"hidden":break;default:e.value=""}})}(r)}return function(e,t,n,r=""){var o=e.split(".");if(1===o.length)e=o[0],null!=window[e]&&"function"==typeof window[e]&&window[e](t,n,r);else if(2===o.length){var i=o[0];e=o[1],null!=window[i]&&"object"==typeof window[i]&&null!=window[i][e]&&"function"==typeof window[i][e]&&window[i][e](t,n,r)}}(o,n,e,r)}alert("Xảy ra lỗi rồi")}};var c=new FormData;k?Array.from(v).forEach(function(e){c.append(n+"[]",e)}):e.image&&Array.from(e.image).forEach(function(e){c.append(n+"[]",e)});for(const[t,n]of Object.entries(e))"image"!==t&&c.append(t,n);!function(e){e.getAttribute("style")&&e.setAttribute("style-old",e.getAttribute("style"));const t=e.getBoundingClientRect();Object.assign(e.style,{width:`${t.width}px`,height:`${t.height}px`,position:"relative",display:"inline-block"}),e.hasAttribute("content")?e.setAttribute("content-old",e.getAttribute("content")):e.setAttribute("content-old",e.innerHTML);e.disabled=!0;const n=(r=e,o="color",window.getComputedStyle(r,null).getPropertyValue(`'${o}'`));var r,o;setTimeout(()=>{e.innerHTML=`<div class="r-s-loader"></div><style>.r-s-loader{position:absolute;left:50%;top:50%;border:5px solid ${n};border-radius:50%;border-top:5px solid ${n};border-bottom:5px solid ${n};border-left:5px solid transparent;border-right:5px solid transparent;width:${t.height-12}px;height:${t.height-12}px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:translate(-50%,-50%) rotate(0)}100%{-webkit-transform:translate(-50%,-50%) rotate(360deg)}}@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0)}100%{transform:translate(-50%,-50%) rotate(360deg)}}</style>`},d)}(s),l.send(c)}if(x=t){var V=x.querySelectorAll("[rules]:not([disabled])");for(var I of V){var P=I.getAttribute("rules").split("||");for(var F of P){var W,Y=F.includes(":");Y&&(W=F.split(":"),F=W[0]);var Z=p[F];if(F.includes("regex")&&(Z=p.regex),Y)Z=Z(W[1],x);Array.isArray(g[I.name])?g[I.name].push(Z):g[I.name]=[Z]}I.onblur=R,I.oninput=$,I.onclick=$,I.onchange=$}x.onsubmit=function(t){t.preventDefault();var r=!0,o=!0;for(var i of V)z({target:i})||(r=!1);0!=Object.keys(e).length&&e.rules.forEach(function(e){var t=x.querySelectorAll(e.selector);t.length>0&&((o=j(e,!0))||(o=!1))});O=!(null!=q&&!function(e,t,n,r=""){var o=e.split(".");if(1===o.length)return e=o[0],null!=window[e]&&"function"==typeof window[e]&&window[e](t,n,r),window[e](t,n,r);if(2===o.length){var i=o[0];return e=o[1],null!=window[i]&&"object"==typeof window[i]&&null!=window[i][e]&&"function"==typeof window[i][e]&&window[i][e](t,n,r),window[i][e](t,n,r)}}(q,x));if(r&&o&&O){var a=x.querySelectorAll("[name]:not([disabled])"),s=Array.from(a).reduce(function(e,t){switch(t.type){case"radio":var r=x.querySelector(`input[name="${t.name}"]:checked`);e[t.name]=null!==r?r.value:"";break;case"checkbox":t.matches(":checked")?(Array.isArray(e[t.name])||(e[t.name]=[]),e[t.name].push(t.value)):null==e[t.name]&&(e[t.name]="");break;case"file":e.image=t.files,n=t.name;break;default:e[t.name]=t.value}return e},{});D(s,x)}else A=[]},0!=Object.keys(e).length&&e.rules.forEach(function(e){Array.isArray(w[e.selector])?w[e.selector].push(e.check):w[e.selector]=[e.check];var t=x.querySelectorAll(e.selector);Array.from(t).forEach(function(t){t.onchange=function(){j(e,!1)}})})}return{start:(function(){if(k){let e=t.querySelector("[input-file]"),r=t.querySelector("[data-gallery]");n=e.name,e.onchange=function(t){N(r,t.target.files),e.value=null}}}(),x.querySelectorAll("[name]:not([disabled])").forEach(e=>e.hasAttribute("style")&&e.removeAttribute("style")),void x.querySelectorAll(".r-error-message").forEach(e=>H(e)))}})}return{load:void v(),setColor:function(e){m(e)},refresh:function(){v()}}})();